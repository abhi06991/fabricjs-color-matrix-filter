!function(a){"use strict";var b=a.fabric||(a.fabric={});b.Image.filters.ColorMatrix=b.util.createClass(b.Image.filters.BaseFilter,{type:"ColorMatrix",initialize:function(a){a||(a={}),this.matrix=a.matrix||[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]},applyTo:function(a){var b,c,d,e,f,g=a.getContext("2d"),h=g.getImageData(0,0,a.width,a.height),i=h.data,j=i.length,k=this.matrix;for(b=0;j>b;b+=4)c=i[b],d=i[b+1],e=i[b+2],f=i[b+3],i[b]=c*k[0]+d*k[1]+e*k[2]+f*k[3]+k[4],i[b+1]=c*k[5]+d*k[6]+e*k[7]+f*k[8]+k[9],i[b+2]=c*k[10]+d*k[11]+e*k[12]+f*k[13]+k[14],i[b+3]=c*k[15]+d*k[16]+e*k[17]+f*k[18]+k[19];g.putImageData(h,0,0)},toJSON:function(){return{type:this.type,matrix:this.matrix}},toObject:function(){return b.util.object.extend(this.callSuper("toObject"),{type:this.type,matrix:this.matrix})}}),b.Image.filters.ColorMatrix.fromObject=function(a){return new b.Image.filters.ColorMatrix(a)}}("undefined"!=typeof exports?exports:this);