!function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.ColorMatrixFilter=e.util.createClass(e.Image.filters.BaseFilter,{type:"ColorMatrixFilter",applyTo:function(t){var e,r,i,a,o,l=t.getContext("2d"),n=l.getImageData(0,0,t.width,t.height),s=n.data,f=s.length,c=this.matrix;for(e=0;f>e;e+=4)r=s[e],i=s[e+1],a=s[e+2],o=s[e+3],s[e]=r*c[0]+i*c[1]+a*c[2]+o*c[3]+c[4],s[e+1]=r*c[5]+i*c[6]+a*c[7]+o*c[8]+c[9],s[e+2]=r*c[10]+i*c[11]+a*c[12]+o*c[13]+c[14],s[e+3]=r*c[15]+i*c[16]+a*c[17]+o*c[18]+c[19];l.putImageData(n,0,0)},toObject:function(){return e.util.object.extend(this.callSuper("toObject"),{matrix:this.matrix})}}),e.Image.filters.ColorMatrixFilter.fromObject=function(t){return new e.Image.filters.ColorMatrixFilter(t)}}("undefined"!=typeof exports?exports:this);
